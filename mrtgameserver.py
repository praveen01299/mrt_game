
MRT_Stations = [
    {
        "Station_Name": "Bukit Batok",
        "Station_Code": ["NS2"],
        "Line": ["North-South Line"],
        "Year_Started_Operation": 1990,
        "Location": "1.34879, 103.74938"
    },
    {
        "Station_Name": "Bukit Gombak",
        "Station_Code": ["NS3"],
        "Line": ["North-South Line"],
        "Year_Started_Operation": 1990,
        "Location": "1.35876, 103.75185"
    },
    {
        "Station_Name": "Choa Chu Kang",
        "Station_Code": ["NS4"],
        "Line": ["North-South Line"],
        "Year_Started_Operation": 1990,
        "Location": "1.38551, 103.74426"
    },
    {
        "Station_Name": "Yew Tee",
        "Station_Code": ["NS5"],
        "Line": ["North-South Line"],
        "Year_Started_Operation": 1996,
        "Location": "1.39739, 103.74732"
    },
    {
        "Station_Name": "Kranji",
        "Station_Code": ["NS7"],
        "Line": ["North-South Line"],
        "Year_Started_Operation": 1996,
        "Location": "1.42522, 103.76207"
    },
    {
        "Station_Name": "Marsiling",
        "Station_Code": ["NS8"],
        "Line": ["North-South Line"],
        "Year_Started_Operation": 1996,
        "Location": "1.43262, 103.77398"
    },
    {
        "Station_Name": "Woodlands",
        "Station_Code": ["NS9", "TE2"],
        "Line": ["North-South Line", "Thomson-East Coast Line"],
        "Year_Started_Operation": 1996,
        "Location": "1.43701, 103.78646"
    },
    {
        "Station_Name": "Admiralty",
        "Station_Code": ["NS10"],
        "Line": ["North-South Line"],
        "Year_Started_Operation": 1996,
        "Location": "1.44064, 103.80101"
    },
    {
        "Station_Name": "Sembawang",
        "Station_Code": ["NS11"],
        "Line": ["North-South Line"],
        "Year_Started_Operation": 1996,
        "Location": "1.44905, 103.82011"
    },
    {
        "Station_Name": "Canberra",
        "Station_Code": ["NS12"],
        "Line": ["North-South Line"],
        "Year_Started_Operation": 1996,
        "Location": "1.4433, 103.8296"
    },
    {
        "Station_Name": "Yishun",
        "Station_Code": ["NS13"],
        "Line": ["North-South Line"],
        "Year_Started_Operation": 1996,
        "Location": "1.42925, 103.835"
    },
    {
        "Station_Name": "Khatib",
        "Station_Code": ["NS14"],
        "Line": ["North-South Line"],
        "Year_Started_Operation": 1996,
        "Location": "1.41732, 103.83301"
    },
    {
        "Station_Name": "Yio Chu Kang",
        "Station_Code": ["NS15"],
        "Line": ["North-South Line"],
        "Year_Started_Operation": 1996,
        "Location": "1.38197, 103.84491"
    },
    {
        "Station_Name": "Ang Mo Kio",
        "Station_Code": ["NS16"],
        "Line": ["North-South Line"],
        "Year_Started_Operation": 1996,
        "Location": "1.37004, 103.84953"
    },
    {
        "Station_Name": "Bishan",
        "Station_Code": ["NS17", "CC15"],
        "Line": ["North-South Line", "Circle Line"],
        "Year_Started_Operation": 1987,
        "Location": "1.35076, 103.84811"
    },
    {
        "Station_Name": "Braddell",
        "Station_Code": ["NS18"],
        "Line": ["North-South Line"],
        "Year_Started_Operation": 1987,
        "Location": "1.34074, 103.84689"
    },
    {
        "Station_Name": "Toa Payoh",
        "Station_Code": ["NS19"],
        "Line": ["North-South Line"],
        "Year_Started_Operation": 1987,
        "Location": "1.33343, 103.84736"
    },
    {
        "Station_Name": "Novena",
        "Station_Code": ["NS20"],
        "Line": ["North-South Line"],
        "Year_Started_Operation": 1987,
        "Location": "1.32002, 103.8438"
    },
    {
        "Station_Name": "Newton",
        "Station_Code": ["NS21", "DT11"],
        "Line": ["North-South Line", "Downtown Line"],
        "Year_Started_Operation": 1987,
        "Location": "1.31245, 103.83835"
    },
    {
        "Station_Name": "Orchard",
        "Station_Code": ["NS22", "TE14"],
        "Line": ["North-South Line", "Thomson-East Coast Line"],
        "Year_Started_Operation": 1987,
        "Location": "1.30468, 103.83195"
    },
    {
        "Station_Name": "Somerset",
        "Station_Code": ["NS23"],
        "Line": ["North-South Line"],
        "Year_Started_Operation": 1987,
        "Location": "1.3005, 103.83863"
    },
    {
        "Station_Name": "Dhoby Ghaut",
        "Station_Code": ["NS24", "NE6", "CC1"],
        "Line": ["North-South Line", "North East Line", "Circle Line"],
        "Year_Started_Operation": 1987,
        "Location": "1.29859, 103.84599"
    },
    {
        "Station_Name": "City Hall",
        "Station_Code": ["NS25"],
        "Line": ["North-South Line", "East West Line"],
        "Year_Started_Operation": 1987,
        "Location": "1.29329, 103.85266"
    },
    {
        "Station_Name": "Raffles Place",
        "Station_Code": ["NS26"],
        "Line": ["North-South Line", "East West Line"],
        "Year_Started_Operation": 1987,
        "Location": "1.28389, 103.85142"
    },
    {
        "Station_Name": "Marina Bay",
        "Station_Code": ["NS27", "CE2", "TE20"],
        "Line": ["North-South Line", "Circle Line", "Thomson-East Coast Line"],
        "Year_Started_Operation": 1989,
        "Location": "1.27613, 103.85461"
    },
    {
        "Station_Name": "Marina South Pier",
        "Station_Code": ["NS28"],
        "Line": ["North-South Line"],
        "Year_Started_Operation": 2014,
        "Location": "1.27085, 103.8629"
    },
    {
        "Station_Name": "Pasir Ris",
        "Station_Code": ["EW1"],
        "Line": ["East West Line"],
        "Year_Started_Operation": 1989,
        "Location": "1.37311, 103.94926"
    },
    {
        "Station_Name": "Tampines",
        "Station_Code": ["EW2"],
        "Line": ["East West Line"],
        "Year_Started_Operation": 1989,
        "Location": "1.3531, 103.94523"
    },
    {
        "Station_Name": "Simei",
        "Station_Code": ["EW3"],
        "Line": ["East West Line"],
        "Year_Started_Operation": 1989,
        "Location": "1.3431, 103.95355"
    },
    {
        "Station_Name": "Tanah Merah",
        "Station_Code": ["EW4"],
        "Line": ["East West Line"],
        "Year_Started_Operation": 1989,
        "Location": "1.32725, 103.94662"
    },
    {
        "Station_Name": "Bedok",
        "Station_Code": ["EW5"],
        "Line": ["East West Line"],
        "Year_Started_Operation": 1989,
        "Location": "1.32403, 103.93002"
    },
    {
        "Station_Name": "Kembangan",
        "Station_Code": ["EW6"],
        "Line": ["East West Line"],
        "Year_Started_Operation": 1989,
        "Location": "1.32103, 103.91281"
    },
    {
        "Station_Name": "Eunos",
        "Station_Code": ["EW7"],
        "Line": ["East West Line"],
        "Year_Started_Operation": 1989,
        "Location": "1.31976, 103.90306"
    },
    {
        "Station_Name": "Paya Lebar",
        "Station_Code": ["EW8", "CC9"],
        "Line": ["East West Line", "Circle Line"],
        "Year_Started_Operation": 1989,
        "Location": "1.31813, 103.89302"
    },
    {
        "Station_Name": "Aljunied",
        "Station_Code": ["EW9"],
        "Line": ["East West Line"],
        "Year_Started_Operation": 1989,
        "Location": "1.31641, 103.88304"
    },
    {
        "Station_Name": "Kallang",
        "Station_Code": ["EW10"],
        "Line": ["East West Line"],
        "Year_Started_Operation": 1989,
        "Location": "1.31137, 103.87131"
    },
    {
        "Station_Name": "Lavendar",
        "Station_Code": ["EW11"],
        "Line": ["East West Line"],
        "Year_Started_Operation": 1989,
        "Location": "1.30723, 103.86305"
    },
    {
        "Station_Name": "Bugis",
        "Station_Code": ["EW12", "DT14"],
        "Line": ["East West Line", "Downtown Line"],
        "Year_Started_Operation": 1989,
        "Location": "1.30106, 103.85596"
    },
    {
        "Station_Name": "Tanjong Pagar",
        "Station_Code": ["EW15"],
        "Line": ["East West Line"],
        "Year_Started_Operation": 1987,
        "Location": "1.27664, 103.84665"
    },
    {
        "Station_Name": "Outram Park",
        "Station_Code": ["EW16", "NE3", "TE17"],
        "Line": ["East West Line", "North East Line", "Thomson-East Coast Line"],
        "Year_Started_Operation": 1987,
        "Location": "1.28153, 103.83914"
    },
    {
        "Station_Name": "Tiong Bahru",
        "Station_Code": ["EW17"],
        "Line": ["East West Line"],
        "Year_Started_Operation": 1988,
        "Location": "1.28608, 103.82689"
    },
    {
        "Station_Name": "Redhill",
        "Station_Code": ["EW18"],
        "Line": ["East West Line"],
        "Year_Started_Operation": 1988,
        "Location": "1.28973, 103.81648"
    },
    {
        "Station_Name": "Queenstown",
        "Station_Code": ["EW19"],
        "Line": ["East West Line"],
        "Year_Started_Operation": 1988,
        "Location": "1.29479, 103.80601"
    },
    {
        "Station_Name": "Commonwealth",
        "Station_Code": ["EW20"],
        "Line": ["East West Line"],
        "Year_Started_Operation": 1988,
        "Location": "1.30256, 103.79827"
    },
    {
        "Station_Name": "Buona Vista",
        "Station_Code": ["EW21", "CC22"],
        "Line": ["East West Line", "Circle Line"],
        "Year_Started_Operation": 1988,
        "Location": "1.30734, 103.79"
    },
    {
        "Station_Name": "Dover",
        "Station_Code": ["EW22"],
        "Line": ["East West Line"],
        "Year_Started_Operation": 2001,
        "Location": "1.31142, 103.77857"
    },
    {
        "Station_Name": "Clementi",
        "Station_Code": ["EW23"],
        "Line": ["East West Line"],
        "Year_Started_Operation": 1988,
        "Location": "1.31532, 103.76513"
    },
    {
        "Station_Name": "Jurong East",
        "Station_Code": ["EW24", "NS1"],
        "Line": ["East West Line", "North-South Line"],
        "Year_Started_Operation": 1988,
        "Location": "1.33321, 103.7422"
    },
    {
        "Station_Name": "Chinese Garden",
        "Station_Code": ["EW25"],
        "Line": ["East West Line"],
        "Year_Started_Operation": 1988,
        "Location": "1.34235, 103.73256"
    },
    {
        "Station_Name": "Lakeside",
        "Station_Code": ["EW25"],
        "Line": ["East West Line"],
        "Year_Started_Operation": 1988,
        "Location": "1.34428, 103.72072"
    },
    {
        "Station_Name": "Boon Lay",
        "Station_Code": ["EW27"],
        "Line": ["East West Line"],
        "Year_Started_Operation": 1990,
        "Location": "1.33853, 103.70595"
    },
    {
        "Station_Name": "Pioneer",
        "Station_Code": ["EW28"],
        "Line": ["East West Line"],
        "Year_Started_Operation": 1990,
        "Location": "1.33754, 103.69692"
    },
    {
        "Station_Name": "Joo Koon",
        "Station_Code": ["EW29"],
        "Line": ["East West Line"],
        "Year_Started_Operation": 2009,
        "Location": "1.32778, 103.67853"
    },
    {
        "Station_Name": "Gul Circle",
        "Station_Code": ["EW30"],
        "Line": ["East West Line"],
        "Year_Started_Operation": 2017,
        "Location": "1.31968, 103.6607"
    },
    {
        "Station_Name": "Tuas Crescent",
        "Station_Code": ["EW31"],
        "Line": ["East West Line"],
        "Year_Started_Operation": 2017,
        "Location": "1.32116, 103.64901"
    },
    {
        "Station_Name": "Tuas West Road",
        "Station_Code": ["EW32"],
        "Line": ["East West Line"],
        "Year_Started_Operation": 2017,
        "Location": "1.33005, 103.63961"
    },
    {
        "Station_Name": "Tuas Link",
        "Station_Code": ["EW33"],
        "Line": ["East West Line"],
        "Year_Started_Operation": 2017,
        "Location": "1.34032, 103.63682"
    },
    {
        "Station_Name": "Expo",
        "Station_Code": ["CG1", "DT35"],
        "Line": ["East West Line"],
        "Year_Started_Operation": 2001,
        "Location": "1.33458, 103.96158"
    },
    {
        "Station_Name": "Changi Airport",
        "Station_Code": ["CG2"],
        "Line": ["East West Line"],
        "Year_Started_Operation": 2002,
        "Location": "1.35674, 103.98857"
    },
    {
        "Station_Name": "HarbourFront",
        "Station_Code": ["NE1"],
        "Line": ["North East Line"],
        "Year_Started_Operation": 2003,
        "Location": "1.26596, 103.82077"
    },
    {
        "Station_Name": "Chinatown",
        "Station_Code": ["NE1", "DT19"],
        "Line": ["North East Line", "Downtown Line"],
        "Year_Started_Operation": 2003,
        "Location": "1.28399, 103.84317"
    },
    {
        "Station_Name": "Clarke Quay",
        "Station_Code": ["NE5"],
        "Line": ["North East Line"],
        "Year_Started_Operation": 2003,
        "Location": "1.28845, 103.84675"
    },
    {
        "Station_Name": "Little India",
        "Station_Code": ["NE7", "DT12"],
        "Line": ["North East Line", "Downtown Line"],
        "Year_Started_Operation": 2003,
        "Location": "1.30642, 103.84945"
    },
    {
        "Station_Name": "Farrer Park",
        "Station_Code": ["NE8"],
        "Line": ["North East Line"],
        "Year_Started_Operation": 2003,
        "Location": "1.31259, 103.85439"
    },
    {
        "Station_Name": "Boon Keng",
        "Station_Code": ["NE9"],
        "Line": ["North East Line"],
        "Year_Started_Operation": 2003,
        "Location": "1.31948, 103.86208"
    },
    {
        "Station_Name": "Potong Pasir",
        "Station_Code": ["NE10"],
        "Line": ["North East Line"],
        "Year_Started_Operation": 2003,
        "Location": "1.33137, 103.86917"
    },
    {
        "Station_Name": "Woodleigh",
        "Station_Code": ["NE11"],
        "Line": ["North East Line"],
        "Year_Started_Operation": 2011,
        "Location": "1.33938, 103.87075"
    },
    {
        "Station_Name": "Serangoon",
        "Station_Code": ["NE11", "CC13"],
        "Line": ["North East Line", "Circle Line"],
        "Year_Started_Operation": 2003,
        "Location": "1.34943, 103.87368"
    },
    {
        "Station_Name": "Kovan",
        "Station_Code": ["NE13"],
        "Line": ["North East Line"],
        "Year_Started_Operation": 2003,
        "Location": "1.36018, 103.88524"
    },
    {
        "Station_Name": "Hougang",
        "Station_Code": ["NE14"],
        "Line": ["North East Line"],
        "Year_Started_Operation": 2003,
        "Location": "1.37095, 103.89249"
    },
    {
        "Station_Name": "Buangkok",
        "Station_Code": ["NE15"],
        "Line": ["North East Line"],
        "Year_Started_Operation": 2006,
        "Location": "1.38241, 103.89299"
    },
    {
        "Station_Name": "Sengkang",
        "Station_Code": ["NE16"],
        "Line": ["North East Line"],
        "Year_Started_Operation": 2003,
        "Location": "1.39128, 103.89521"
    },
    {
        "Station_Name": "Punggol",
        "Station_Code": ["NE17"],
        "Line": ["North East Line"],
        "Year_Started_Operation": 2003,
        "Location": "1.4052, 103.90225"
    },
    {
        "Station_Name": "Bras Basah",
        "Station_Code": ["CC2"],
        "Line": ["Circle Line"],
        "Year_Started_Operation": 2010,
        "Location": "1.29757, 103.8505"
    },
    {
        "Station_Name": "Esplanade",
        "Station_Code": ["CC3"],
        "Line": ["Circle Line"],
        "Year_Started_Operation": 2010,
        "Location": "1.29359, 103.85541"
    },
    {
        "Station_Name": "Promenade",
        "Station_Code": ["CC4", "DT15"],
        "Line": ["Circle Line", "Downtown Line"],
        "Year_Started_Operation": 2010,
        "Location": "1.29389, 103.86"
    },
    {
        "Station_Name": "Nicoll Highway",
        "Station_Code": ["CC5"],
        "Line": ["Circle Line"],
        "Year_Started_Operation": 2010,
        "Location": "1.2996, 103.86399"
    },
    {
        "Station_Name": "Stadium",
        "Station_Code": ["CC6"],
        "Line": ["Circle Line"],
        "Year_Started_Operation": 2010,
        "Location": "1.30273, 103.87528"
    },
    {
        "Station_Name": "Mountbatten",
        "Station_Code": ["CC7"],
        "Line": ["Circle Line"],
        "Year_Started_Operation": 2010,
        "Location": "1.30631, 103.88244"
    },
    {
        "Station_Name": "Dakota",
        "Station_Code": ["CC8"],
        "Line": ["Circle Line"],
        "Year_Started_Operation": 2010,
        "Location": "1.30837, 103.88871"
    },
    {
        "Station_Name": "Macpherson",
        "Station_Code": ["CC10", "DT26"],
        "Line": ["Circle Line"],
        "Year_Started_Operation": 2010,
        "Location": "1.32678, 103.89019"
    },
    {
        "Station_Name": "Tai Seng",
        "Station_Code": ["CC11"],
        "Line": ["Circle Line"],
        "Year_Started_Operation": 2010,
        "Location": "1.3354, 103.88817"
    },
    {
        "Station_Name": "Bartley",
        "Station_Code": ["CC12"],
        "Line": ["Circle Line"],
        "Year_Started_Operation": 2009,
        "Location": "1.34276, 103.87991"
    },
    {
        "Station_Name": "Lorong Chuan",
        "Station_Code": ["CC14"],
        "Line": ["Circle Line"],
        "Year_Started_Operation": 2009,
        "Location": "1.35164, 103.86285"
    },
    {
        "Station_Name": "Marymount",
        "Station_Code": ["CC16"],
        "Line": ["Circle Line"],
        "Year_Started_Operation": 2009,
        "Location": "1.34913, 103.83946"
    },
    {
        "Station_Name": "Caldecott",
        "Station_Code": ["CC17", "TE9"],
        "Line": ["Circle Line", "Thomson-East Coast Line"],
        "Year_Started_Operation": 2011,
        "Location": "1.33776, 103.8394"
    },
    {
        "Station_Name": "Botanic Gardens",
        "Station_Code": ["CC19"],
        "Line": ["Circle Line"],
        "Year_Started_Operation": 2011,
        "Location": "1.3224, 103.81505"
    },
    {
        "Station_Name": "Farrer Road",
        "Station_Code": ["CC20"],
        "Line": ["Circle Line"],
        "Year_Started_Operation": 2011,
        "Location": "1.31725, 103.80749"
    },
    {
        "Station_Name": "Holland Village",
        "Station_Code": ["CC21"],
        "Line": ["Circle Line"],
        "Year_Started_Operation": 2011,
        "Location": "1.3112, 103.79595"
    },
    {
        "Station_Name": "one-north",
        "Station_Code": ["CC23"],
        "Line": ["Circle Line"],
        "Year_Started_Operation": 2011,
        "Location": "1.29923, 103.78694"
    },
    {
        "Station_Name": "Kent Ridge",
        "Station_Code": ["CC24"],
        "Line": ["Circle Line"],
        "Year_Started_Operation": 2011,
        "Location": "1.29245, 103.78466"
    },
    {
        "Station_Name": "Haw Par Villa",
        "Station_Code": ["CC25"],
        "Line": ["Circle Line"],
        "Year_Started_Operation": 2011,
        "Location": "1.28237, 103.78183"
    },
    {
        "Station_Name": "Pasir Panjang",
        "Station_Code": ["CC26"],
        "Line": ["Circle Line"],
        "Year_Started_Operation": 2011,
        "Location": "1.27628, 103.79118"
    },
    {
        "Station_Name": "Labrador Park",
        "Station_Code": ["CC27"],
        "Line": ["Circle Line"],
        "Year_Started_Operation": 2011,
        "Location": "1.27233, 103.80273"
    },
    {
        "Station_Name": "Telok Blangah",
        "Station_Code": ["CC28"],
        "Line": ["Circle Line"],
        "Year_Started_Operation": 2011,
        "Location": "1.2707, 103.80972"
    },
    {
        "Station_Name": "Bayfront",
        "Station_Code": ["CE1", "DT16"],
        "Line": ["Circle Line", "Downtown Line"],
        "Year_Started_Operation": 2012,
        "Location": "1.28134, 103.85882"
    },
    {
        "Station_Name": "Bukit Panjang",
        "Station_Code": ["DT1"],
        "Line": ["Downtown Line"],
        "Year_Started_Operation": 2015,
        "Location": "1.37813, 103.7635"
    },
    {
        "Station_Name": "Cashew",
        "Station_Code": ["DT2"],
        "Line": ["Downtown Line"],
        "Year_Started_Operation": 2015,
        "Location": "1.36882, 103.76471"
    },
    {
        "Station_Name": "Hillview",
        "Station_Code": ["DT3"],
        "Line": ["Downtown Line"],
        "Year_Started_Operation": 2015,
        "Location": "1.36251, 103.76724"
    },
    {
        "Station_Name": "Beauty World",
        "Station_Code": ["DT4"],
        "Line": ["Downtown Line"],
        "Year_Started_Operation": 2015,
        "Location": "1.34008, 103.77597"
    },
    {
        "Station_Name": "King Albert Park",
        "Station_Code": ["DT5"],
        "Line": ["Downtown Line"],
        "Year_Started_Operation": 2015,
        "Location": "1.3354, 103.7838"
    },
    {
        "Station_Name": "Sixth Avenue",
        "Station_Code": ["DT6"],
        "Line": ["Downtown Line"],
        "Year_Started_Operation": 2015,
        "Location": "1.33059, 103.79762"
    },
    {
        "Station_Name": "Tan Kah Kee",
        "Station_Code": ["DT8"],
        "Line": ["Downtown Line"],
        "Year_Started_Operation": 2015,
        "Location": "1.3254, 103.80805"
    },
    {
        "Station_Name": "Stevens",
        "Station_Code": ["DT10", "TE11"],
        "Line": ["Downtown Line", "Thomson-East Coast Line"],
        "Year_Started_Operation": 2015,
        "Location": "1.32008, 103.8259"
    },
    {
        "Station_Name": "Rochor",
        "Station_Code": ["DT3"],
        "Line": ["Downtown Line"],
        "Year_Started_Operation": 2015,
        "Location": "1.30399, 103.85281"
    },
    {
        "Station_Name": "Downtown",
        "Station_Code": ["DT17"],
        "Line": ["Downtown Line"],
        "Year_Started_Operation": 2013,
        "Location": "1.27941, 103.85277"
    },
    {
        "Station_Name": "Telok Ayer",
        "Station_Code": ["DT18"],
        "Line": ["Downtown Line"],
        "Year_Started_Operation": 2013,
        "Location": "1.28216, 103.84852"
    },
    {
        "Station_Name": "Fort Canning",
        "Station_Code": ["DT20"],
        "Line": ["Downtown Line"],
        "Year_Started_Operation": 2017,
        "Location": "1.29243, 103.845"
    },
    {
        "Station_Name": "Bencoolen",
        "Station_Code": ["DT21"],
        "Line": ["Downtown Line"],
        "Year_Started_Operation": 2017,
        "Location": "1.29963, 103.85105"
    },
    {
        "Station_Name": "Jalan Besar",
        "Station_Code": ["DT22"],
        "Line": ["Downtown Line"],
        "Year_Started_Operation": 2017,
        "Location": "1.30525, 103.85556"
    },
    {
        "Station_Name": "Bendemeer",
        "Station_Code": ["DT23"],
        "Line": ["Downtown Line"],
        "Year_Started_Operation": 2017,
        "Location": "1.31382, 103.86331"
    },
    {
        "Station_Name": "Geylang Bahru",
        "Station_Code": ["DT24"],
        "Line": ["Downtown Line"],
        "Year_Started_Operation": 2017,
        "Location": "1.32148, 103.8719"
    },
    {
        "Station_Name": "Mattar",
        "Station_Code": ["DT25"],
        "Line": ["Downtown Line"],
        "Year_Started_Operation": 2017,
        "Location": "1.32688, 103.88321"
    },
    {
        "Station_Name": "Ubi",
        "Station_Code": ["DT27"],
        "Line": ["Downtown Line"],
        "Year_Started_Operation": 2017,
        "Location": "1.32979, 103.89922"
    },
    {
        "Station_Name": "Kaki Bukit",
        "Station_Code": ["DT28"],
        "Line": ["Downtown Line"],
        "Year_Started_Operation": 2017,
        "Location": "1.33514, 103.90912"
    },
    {
        "Station_Name": "Bedok North",
        "Station_Code": ["DT29"],
        "Line": ["Downtown Line"],
        "Year_Started_Operation": 2017,
        "Location": "1.3348, 103.91785"
    },
    {
        "Station_Name": "Bedok Reservoir",
        "Station_Code": ["DT30"],
        "Line": ["Downtown Line"],
        "Year_Started_Operation": 2017,
        "Location": "1.33652, 103.93287"
    },
    {
        "Station_Name": "Tampines West",
        "Station_Code": ["DT31"],
        "Line": ["Downtown Line"],
        "Year_Started_Operation": 2017,
        "Location": "1.34534, 103.93847"
    },
    {
        "Station_Name": "Tampines East",
        "Station_Code": ["DT33"],
        "Line": ["Downtown Line"],
        "Year_Started_Operation": 2017,
        "Location": "1.35681, 103.95574"
    },
    {
        "Station_Name": "Upper Changi",
        "Station_Code": ["DT34"],
        "Line": ["Downtown Line"],
        "Year_Started_Operation": 2017,
        "Location": "1.34111, 103.96154"
    },
    {
        "Station_Name": "Woodlands North",
        "Station_Code": ["TE1"],
        "Line": ["Thomson-East Coast Line"],
        "Year_Started_Operation": 2020,
        "Location": "1.4488, 103.78565"
    },
    {
        "Station_Name": "Woodlands South",
        "Station_Code": ["TE3"],
        "Line": ["Thomson-East Coast Line"],
        "Year_Started_Operation": 2020,
        "Location": "1.42741, 103.79371"
    },
    {
        "Station_Name": "Springleaf",
        "Station_Code": ["TE4"],
        "Line": ["Thomson-East Coast Line"],
        "Year_Started_Operation": 2021,
        "Location": "1.39837, 103.81799"
    },
    {
        "Station_Name": "Lentor",
        "Station_Code": ["TE5"],
        "Line": ["Thomson-East Coast Line"],
        "Year_Started_Operation": 2021,
        "Location": "1.38461, 103.83655"
    },
    {
        "Station_Name": "Mayflower",
        "Station_Code": ["TE6"],
        "Line": ["Thomson-East Coast Line"],
        "Year_Started_Operation": 2021,
        "Location": "1.37147, 103.83669"
    },
    {
        "Station_Name": "Bright Hill",
        "Station_Code": ["TE7"],
        "Line": ["Thomson-East Coast Line"],
        "Year_Started_Operation": 2021,
        "Location": "1.3638, 103.83354"
    },
    {
        "Station_Name": "Upper Thomson",
        "Station_Code": ["TE8"],
        "Line": ["Thomson-East Coast Line"],
        "Year_Started_Operation": 2021,
        "Location": "1.35452, 103.83296"
    },
    {
        "Station_Name": "Napier",
        "Station_Code": ["TE12"],
        "Line": ["Thomson-East Coast Line"],
        "Year_Started_Operation": 2022,
        "Location": "1.30638, 103.81888"
    },
    {
        "Station_Name": "Orchard Boulevard",
        "Station_Code": ["TE13"],
        "Line": ["Thomson-East Coast Line"],
        "Year_Started_Operation": 2022,
        "Location": "1.30243, 103.82395"
    },
    {
        "Station_Name": "Great World",
        "Station_Code": ["TE15"],
        "Line": ["Thomson-East Coast Line"],
        "Year_Started_Operation": 2022,
        "Location": "1.29477, 103.83304"
    },
    {
        "Station_Name": "Havelock",
        "Station_Code": ["TE16"],
        "Line": ["Thomson-East Coast Line"],
        "Year_Started_Operation": 2022,
        "Location": "1.2885, 103.83342"
    },
    {
        "Station_Name": "Maxwell",
        "Station_Code": ["TE18"],
        "Line": ["Thomson-East Coast Line"],
        "Year_Started_Operation": 2022,
        "Location": "1.28055, 103.84366"
    },
    {
        "Station_Name": "Shenton Way",
        "Station_Code": ["TE19"],
        "Line": ["Thomson-East Coast Line"],
        "Year_Started_Operation": 2022,
        "Location": "1.27765, 103.85025"
    },
    {
        "Station_Name": "Gardens by the Bay",
        "Station_Code": ["TE16"],
        "Line": ["Thomson-East Coast Line"],
        "Year_Started_Operation": 2022,
        "Location": "1.28044, 103.86871"
    },
]

from telegram import Update
from telegram.ext import ApplicationBuilder, CommandHandler, MessageHandler, ContextTypes, filters
import random
from geopy.distance import great_circle

# MRT_Stations and related functions should be defined here

game_state = {'is_playing': False, 'correct_answer': None, 'attempts': 0}

def find_station(station_name, MRT_Stations):
    for station in MRT_Stations:
        if station['Station_Name'].lower() == station_name.lower():
            return station
    return None

def get_direction(user_location, correct_location):
    lat_diff = correct_location[0] - user_location[0]
    lon_diff = correct_location[1] - user_location[1]
    direction = "towards the "

    if lat_diff > 0:
        direction += "north"
    elif lat_diff < 0:
        direction += "south"

    if lon_diff > 0:
        direction += " east"
    elif lon_diff < 0:
        direction += " west"

    return direction

def compare_stations(correct_station, user_station):
    correct_location = tuple(map(float, correct_station['Location'].split(',')))
    user_location = tuple(map(float, user_station['Location'].split(',')))

    distance = great_circle(correct_location, user_location).kilometers
    direction = get_direction(user_location, correct_location)

    if correct_station['Station_Name'].lower() == user_station['Station_Name'].lower():
        return "Correct Answer!", True

    same_line = set(correct_station['Line']).intersection(set(user_station['Line']))
    if same_line:
        response = "Correct Line"
    else:
        response = "Wrong Line"

    # Fix for comparing the year of operation:
    if correct_station['Year_Started_Operation'] < user_station['Year_Started_Operation']:
        age_response = "The correct answer is an older station"
    elif correct_station['Year_Started_Operation'] > user_station['Year_Started_Operation']:
        age_response = "The correct answer is a newer station"
    else:
        age_response = "Correct Age"

    return f"{response}. {age_response}. Distance: {distance:.2f} km {direction}.", False

# 🔁 Updated all functions below to async and updated context types
async def start(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    await update.message.reply_text('Welcome to the MRT Station Guessing Game! Type /start_game to begin.')

async def start_game(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    global game_state
    game_state['is_playing'] = True
    game_state['correct_answer'] = random.choice(MRT_Stations)
    game_state['attempts'] = 0

    map_url = 'https://dam.mediacorp.sg/image/upload/s--kikA5vSH--/f_auto,q_auto/v1/mediacorp/cna/image/2023/01/18/MRT%20map.png?itok=BkwVTtKV'  # Your MRT map image link

    await context.bot.send_photo(chat_id=update.effective_chat.id, photo=map_url)
    await update.message.reply_text("One of the 134 MRT Stations is the correct answer! Can you figure out which one it is? Type your guess below, or type /exit to give up.")

async def handle_guess(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    global game_state
    if not game_state['is_playing']:
        await update.message.reply_text("No game is currently active. Use /start_game to begin a new game.")
        return

    user_guess = update.message.text
    user_station = find_station(user_guess, MRT_Stations)

    if not user_station:
        await update.message.reply_text("There's no such station! Try again.")
        return

    game_state['attempts'] += 1
    correct_station = game_state['correct_answer']
    result, correct = compare_stations(correct_station, user_station)
    await update.message.reply_text(result)

    if correct:
        await update.message.reply_text(f"🎉 Congratulations! You found it in {game_state['attempts']} attempts. Type /start_game to play again.")
        game_state['is_playing'] = False
    else:
        await update.message.reply_text("Try again or type /exit to give up.")

async def exit_game(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    global game_state
    if game_state['is_playing']:
        await update.message.reply_text(
            f"You gave up after {game_state['attempts']} attempts. The correct station was {game_state['correct_answer']['Station_Name']}."
        )
        game_state['is_playing'] = False
    else:
        await update.message.reply_text("No game is currently active. Use /start_game to begin a new game.")

def main():
    TOKEN = 'INPUT TOKEN HERE'
    app = ApplicationBuilder().token(TOKEN).build()

    app.add_handler(CommandHandler("start", start))
    app.add_handler(CommandHandler("start_game", start_game))
    app.add_handler(CommandHandler("exit", exit_game))
    app.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, handle_guess))

    app.run_polling()

if __name__ == '__main__':
    main()  
